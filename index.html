<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EsportePremium - Pedido de Camisa</title>
</head>
<body style="font-family: sans-serif; text-align: center; padding: 2rem">
  <h1>Pedido de Camisa</h1>
  <form id="pedidoForm">
    <input name="nome" id="nome" placeholder="Seu nome" required /><br /><br />

    <select name="modelo" id="modelo" onchange="atualizarImagem()">
      <option value="Flamengo 23/24">Flamengo 23/24</option>
      <option value="Palmeiras 23/24">Palmeiras 23/24</option>
      <option value="Brasil Retro 2002">Brasil Retro 2002</option>
      <option value="Real Madrid 23/24">Real Madrid 23/24</option>
      <option value="Outros">Outros</option>
    </select><br /><br />

    <select name="tamanho" id="tamanho">
      <option value="P">P</option>
      <option value="M">M</option>
      <option value="G">G</option>
      <option value="GG">GG</option>
    </select><br /><br />

    <input name="personalizacao" id="personalizacao" placeholder="Personaliza√ß√£o" /><br /><br />
    <textarea name="observacoes" id="observacoes" placeholder="Observa√ß√µes"></textarea><br /><br />

    <img id="previewImagem" src="/imagens/flamengo.jpg" alt="Imagem da camisa" style="width:200px;display:block;margin:auto;border:1px solid #ccc" /><br />

    <button type="button" onclick="finalizarPedido()">Finalizar e Enviar</button>
  </form>

  <script>
    const imagensPorModelo = {
      "Flamengo 23/24": "/imagens/flamengo.jpg",
      "Palmeiras 23/24": "/imagens/palmeiras.jpg",
      "Brasil Retro 2002": "/imagens/brasil.jpg",
      "Real Madrid 23/24": "/imagens/realmadrid.jpg",
      "Outros": "/imagens/outros.jpg"
    };

    function atualizarImagem() {
      const modelo = document.getElementById('modelo').value;
      const imgPath = imagensPorModelo[modelo] || '/imagens/outros.jpg';
      document.getElementById('previewImagem').src = imgPath;
    }

    function finalizarPedido() {
      const nome = document.getElementById('nome').value;
      const modelo = document.getElementById('modelo').value;
      const tamanho = document.getElementById('tamanho').value;
      const personalizacao = document.getElementById('personalizacao').value;
      const observacoes = document.getElementById('observacoes').value;
      const imagemLink = imagensPorModelo[modelo] || '';

      const texto = `üõí Pedido de Camisa:%0Aüë§ Nome: ${nome}%0Aüëï Modelo: ${modelo}%0Aüìè Tamanho: ${tamanho}%0A‚úçÔ∏è Personaliza√ß√£o: ${personalizacao || '-'}%0Aüìù Observa√ß√µes: ${observacoes || '-'}%0AüñºÔ∏è Imagem: ${window.location.origin}${imagemLink}`;

      fetch('/api/pedido', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({ nome, modelo, tamanho, personalizacao, observacoes })
      });

      window.location.href = `https://wa.me/5531992537858?text=${texto}`;
    }
  </script>
</body>
</html>
